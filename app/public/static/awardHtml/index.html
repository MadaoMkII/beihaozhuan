<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <meta content="-1" http-equiv="Expires">
    <meta content="no-cache" http-equiv="Cache-Control">
    <meta content="no-cache" http-equiv="Pragma">
    <link href="css/public.css" rel="stylesheet" type="text/css">
    <link href="swiper/swiper.min.css" rel="stylesheet" type="text/css"/>
    <link href="swiper/swiper_style.css" rel="stylesheet" type="text/css"/>
    <link href="css/lottery.css" rel="stylesheet" type="text/css"/>
    <script src="js/jquery-1.10.2.min.js"></script>
    <script src="swiper/swiper.min.js"></script>
    <title>抽奖</title>
    <style>
        html {
            font-size: 50px;
            height: 100%;
        }
    </style>
</head>

<body>
<div class="all">
    <div class="lottery_banner">
        <img alt="" src="images/banner.png"/>
    </div>
    <div class="lottery_times">你有<span class="num">10</span>次抽奖机会</div>
    <div class="lottery">
        <div class="shanDeng" id="deng">
            <div id="luck">
                <table style="border-spacing:.1rem .1rem;">
                    <tr>
                        <td class="luck-unit luck-unit-0">
                            <img alt="" src="images/l_gift1.png"/>
                            <div>1.1元红包</div>
                        </td>
                        <td class="luck-unit luck-unit-1">
                            <img alt="" src="images/zWardS_fail2.png"/>
                            <div>谢谢你</div>
                        </td>
                        <td class="luck-unit luck-unit-2">
                            <img alt="" src="images/l_gift3.png"/>
                            <div>1.3元红包</div>
                        </td>
                    </tr>
                    <tr>
                        <td class="luck-unit luck-unit-7">
                            <img alt="" src="images/l_gift5.png"/>
                            <div>1.5元红包</div>
                        </td>
                        <td class="cjBtn" id="btn"></td>
                        <td class="luck-unit luck-unit-3">
                            <img alt="" src="images/zWardS_fail2.png"/>
                            <div>谢谢你</div>
                        </td>
                    </tr>
                    <tr>
                        <td class="luck-unit luck-unit-6">
                            <img alt="" src="images/zWardS_fail2.png"/>
                            <div>谢谢你</div>
                        </td>
                        <td class="luck-unit luck-unit-5">
                            <img alt="" src="images/l_gift2.png"/>
                            <div>1.2元红包</div>
                        </td>
                        <td class="luck-unit luck-unit-4">
                            <img alt="" src="images/l_gift4.png"/>
                            <div>1.4元红包</div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <!--我的奖品-->
    <div class="my_gift">
        <div class="title_block">
            <div class="title">我的奖品</div>
        </div>
        <table border="0" cellpadding="0" cellspacing="0">
            <tbody>
            <tr>
                <th>序号</th>
                <th>奖品名称</th>
                <th></th>
            </tr>
            <tr>
                <td>1</td>
                <td>猪年邮票</td>
                <td>
                    <a href="address.html">填写地址</a>
                </td>
            </tr>
            <tr>
                <td>2</td>
                <td>猪年邮票</td>
                <td>
                    <a href="#">我要充值</a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <!--我的奖品-->

    <!--获奖名单-->
    <div class="my_gift winner_list">
        <div class="title_block">
            <div class="title">获奖名单</div>
        </div>
        <!--轮播图开始-->
        <div class="swiper-container draw-container swiper-container-vertical swiper-container-ios">
            <div class="swiper-wrapper" style="transition-duration: 0ms; transform: translate3d(0px, -180px, 0px);">
                <div class="swiper-slide swiper-slide-duplicate swiper-slide-next swiper-slide-duplicate-prev"
                     data-swiper-slide-index="2" style="height: 45px;">
                    <ul class="adv_list">
                        <li>
                            大型活动策划公司_已成功策划执行超300场线下活动
                        </li>
                    </ul>
                </div>
                <div class="swiper-slide swiper-slide-duplicate-active" data-swiper-slide-index="0"
                     style="height: 45px;">
                    <ul class="adv_list">
                        <li>
                            李四获得猪票
                        </li>
                        <li>
                            王五获得猴票
                        </li>
                        <li>
                            王五获得猴邮票
                        </li>
                    </ul>
                </div>
                <div class="swiper-slide" data-swiper-slide-index="1" style="height: 45px;">
                    <ul class="adv_list">
                        <li>
                            李四获得了小猪邮票
                        </li>
                        <li>
                            李四获得了小猪邮票
                        </li>
                    </ul>
                </div>
                <div class="swiper-slide swiper-slide-prev swiper-slide-duplicate-next" data-swiper-slide-index="2"
                     style="height: 45px;">
                    <ul class="adv_list">
                        <li>
                            大型活动策划公司_已成功策划执行超300场线下活动
                        </li>
                    </ul>
                </div>
                <div class="swiper-slide swiper-slide-duplicate swiper-slide-active" data-swiper-slide-index="0"
                     style="height: 45px;">
                    <ul class="adv_list">
                        <li>
                            李四获得猪票
                        </li>
                        <li>
                            王五获得猴票
                        </li>
                        <li>
                            王五获得猴邮票
                        </li>
                    </ul>
                </div>
            </div>
            <span aria-atomic="true" aria-live="assertive" class="swiper-notification"></span></div>

        <!--轮播图结束-->
    </div>
    <!--获奖名单-->
</div>

<div class="cover dis_no"></div>
<!--弹窗开始-->
<div class="cover_box dis_no">
    <div class="card_box">
        <div class="card_top">
            <div class="title">
                <img alt="" src="images/icon-note.png"/>
                <span>提示</span>
            </div>
            <div class="card_tips">恭喜获得现金红包，点击领取即可提现至零钱哦！欢迎继续体验线上预约纪特邮票。</div>
        </div>
        <ul class="card_form">
            <li>
                <input oninput="if(value>11) value=value.slice(0,11); " placeholder="手机号" type="number">
                <span class="send_code">发送验证码</span>
            </li>
            <li>
                <input maxlength="6" placeholder="验证码" type="text">
            </li>

        </ul>
        <div class="tips">手机号不能为空</div>
        <input class="btn_default" id="form_insure" type="button" value="确认">
    </div>
    <img alt="" class="close" src="images/icon-close.png">
</div>
<!--弹窗结束-->

<!--结果弹窗开始-->
<div class="result_box dis_no">
    <div class="card_box">
        <div class="card_top">
            <div class="title">
                <img alt="" src="images/icon-note.png"/>
                <span>提示</span>
            </div>

        </div>
        <div class="card_tips">恭喜获得现金红包，点击领取即可提现至零钱哦！欢迎继续体验线上预约纪特邮票。</div>
        <input class="btn_default" type="button" value="确认">
    </div>
</div>
<!--结果弹窗结束-->

<script>
    var luck = {
        index: 0, //当前转动到哪个位置，起点位置
        count: 0, //总共有多少个位置
        timer: 0, //setTimeout的ID，用clearTimeout清除
        speed: 20, //初始转动速度
        times: 0, //转动次数
        cycle: 50, //转动基本次数：即至少需要转动多少次再进入抽奖环节
        prize: -1, //中奖位置
        init: function (id) {
            if ($("#" + id).find(".luck-unit").length > 0) {
                $luck = $("#" + id);
                $units = $luck.find(".luck-unit");
                this.obj = $luck;
                this.count = $units.length;
                $luck.find(".luck-unit-" + this.index).addClass("active");
            }
            ;
        },

        roll: function () {
            var index = this.index;
            var count = this.count;
            var luck = this.obj;
            $(luck).find(".luck-unit-" + index).removeClass("active");
            index += 1;
            if (index > count - 1) {
                index = 0;
            }
            ;
            $(luck).find(".luck-unit-" + index).addClass("active");
            this.index = index;
            return false;
        },
        stop: function (index) {
            this.prize = index;
            return false;
        }
    };

    function roll() {
        luck.times += 1;
        luck.roll();
        if (luck.times > luck.cycle + 10 && luck.prize == luck.index) {
            clearTimeout(luck.timer);
            luck.prize = -1;
            luck.times = 0;
            click = false;
        } else {
            if (luck.times < luck.cycle) {
                luck.speed -= 10;
            } else if (luck.times == luck.cycle) {
                var index = Math.random() * (luck.count) | 0;
                if (index > 5) {
                    index = 7;
                } else {
                    index = 5;
                }
                luck.prize = index; //最终中奖位置
            } else {
                if (luck.times > luck.cycle + 10 && ((luck.prize == 0 && luck.index == 7) || luck.prize == luck.index + 1)) {
                    luck.speed += 110;
                } else {
                    luck.speed += 20;
                }
            }
            if (luck.speed < 40) {
                luck.speed = 40;
            }
            ;

            luck.timer = setTimeout(roll, luck.speed);
        }
        return false;
    }

    var click = false;
    window.onload = function () {
        luck.init('luck');
        $("#btn").click(function () {

            setTimeout(function () {
                $(".cover").removeClass("dis_no");
                $(".cover_box").removeClass("dis_no");
                $("body,html").css({
                    "height": "100%",
                    "overflow": "hidden"
                })
            }, 5000);

            if (click) {
                return false;
            } else {
                luck.speed = 100;
                roll();
                click = true;
                return false;
            }

        });
    };

    //			轮播图
    var swiper = new Swiper('.draw-container', {
        direction: "vertical",
        autoplay: true,
        loop: true,
    });

    //ios弹窗位置调整
    $("input").bind('focus', function () {
        var top = document.body.scrollTop;
        $(window).scrollTop(top);
    })
    $("input").bind('blur', function () {
        var top = document.body.scrollTop;
        $(window).scrollTop(top);
    })
    //关闭弹窗
    $(".close").on("click", function () {
        $(".cover").addClass("dis_no");
        $(".cover_box").addClass("dis_no");
        $("body,html").css({
            "height": "100%",
            "overflow": "auto"
        })
    })
    $("#form_insure").on("click", function () {
        $(".cover_box").addClass("dis_no");
        $(".result_box").removeClass("dis_no");
        $("body,html").css({
            "height": "100%",
            "overflow": "hidden"
        })
    })
</script>
</body>

</html>
